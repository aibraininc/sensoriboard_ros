= Sensorimotor calibration with ROS for Gretchen Head
Doc Writer <wwchung91@gmail.com>
v0.1, 2019-03-28
:imagesdir: ./image
:toc:

_This is the manual for calibrating motors using sensoriboards to ROS.
Following these steps will enable you to calibrate sensoriboards with ROS._


=== Recommended Tools
You will need these to calibrate.

Should have picture

* Motor with sensoriboard
* Computer

== Step 0. Find document about the motor
We need to find the travel distance of the motor in 180 degree. For mg996 motor calibration, we assume the max travel distance is 180 degree and 3.141592 in radian

== Step 1. Find the raw encoder values of the motor

=== Step 1.1 Connect the sensorimotor and run
  cd ~/your_grethcen_sdk/sensoriboard_ros

	python get_current_pos.py

[cols="a"]
|====
| image::raw-values.png[320,240]
|====

The terminal returns two values. The first value is the raw pan positon and the second value is the raw tilt position


=== Step 1.2 Get the 90 degree, -90 degree value and 0 degree of the pan and tilt by moving the robot head left, right, up, down with your hands.

[cols="a,a,a,a"]
|====
| image::image9.png[320,240] | image::image1.png[320,240] | image::image13.png[320,240] | image::image4.png[320,240]
|====

The values printed on the terminal will be used as act_min, act_max parameters for pan and tilt.

Also please make robot look at center. The value on the terminal will be used as calib_mid parameter for pan and tilt.

=== Step 1.3 Update the configuration file

[cols="a"]
|====
| image::img-param.png[640]
|====


Open py/motor_param_test.yaml

For both pan and tilt

* Update act_rad with the max travel distance of the motor (in radians) we found at Step 0.
* Update act_min with the min value for pan or tilt we found at step 1.2
* Update act_max with the max value for pan or tilt we found at step 1.2
* Update calib_mid with the value for pan or tilt we found at step 1.2

=== Step 1.4 Check calibration using simulation UI.

If you install gretchen sdk, you can check motor calibration with simulation UI.

	roslaunch course_material init_device.launch

Once you move a robot with your hands, a simulation robot move with same motion. For example, if you move the robot for looking at 90 degree, the simulation robot looks at the same direction.


[cols="a,a"]
|====
| image::img-00.png[320,240] | image::img-90.png[320,240]
|====
